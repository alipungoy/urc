<div class="owl-carousel owl-theme" id="carouselHero">
    <div class="item">
        <img src="https://cpu.edu.ph/wp-content/uploads/2020/05/cpu-afte.jpg" />
    </div>
    <div class="item">
        <img src="https://cpu.edu.ph/wp-content/uploads/2020/05/cpu-night.jpg" />
    </div>
    <div class="item">
        <img src="https://cpu.edu.ph/wp-content/uploads/2020/05/cpu-banner5.jpg" />
    </div>
    <div class="item">
        <img src="https://cpu.edu.ph/wp-content/uploads/2020/05/cpu-banner1.jpg" />
    </div>
</div>

<div class="container shadow-lg p-3 mb-1 bg-body rounded">
    <div>
        <div class="text-center my-3 fs-1">
            <a href="index.php#latestNews" class="text-muted">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
    </div>

    <section class="d-flex justify-content-start" id="latestNews">
        <div class="row">
            <div class="col-md-5 m-4">
                <h2 class="text-cpu-blue fw-bold display-6 d-flex justify-content-center items-center container">Latest News</h2>
                <p id="lastNews">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et
                    dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                    aliquip ex
                    ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
                    dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
                    officia
                    deserunt mollit anim id est laborum.
                </p>
                <a href="news.php" class="fs-6 fw-bold d-flex justify-content-center">View more news...</a>
            </div>
        </div>
        <!-- <div class="p-5 w-50">
        <div class="owl-carousel owl-theme" id="carouselLatestNews">
        </div>
    </div> -->
    </section>


    <section class="d-flex justify-content-center items-center container " id="newsletters">
        <div>
            <div class="mb-5 text-center">
                <h2 class="text-cpu-blue fw-bold display-6">Newsletters</h2>
                <p class="fw-light">
                    It is the official journal of Higher Education Publication of Central Philippine University (ISSN
                    2546-1338) is internationally refereed, comes out semi-annually and is being uploaded here in this
                    page.
                </p>
            </div>
            <div class="row" id="newsletter__List"></div>
            <div class="text-center"><a href="journals.php" class="fs-5 fw-bold">View more...</a></div>
        </div>
    </section>

    <section class="d-flex justify-content-center items-center container " id="patubas">
        <div>
            <div class="mb-5 text-center">
                <h2 class="text-cpu-blue fw-bold display-6">Patubas</h2>
                <p class="fw-light">
                    Patubas is a refereed research journal of Central Philippine University that aims
                    to provide a source of information in the areas of agriculture, natural resources
                    and the environment; social sciences, humanities, and the arts; physical and biological
                    sciences; business and management; engineering, information, and communications technology;
                    education; health, nursing, and medical education; alternative medicine; theology and biblical
                    studies; institutional system and process management; and community baseline impact studies.
                    The objective of the journal is to help professionals, academicians, policy-makers,
                    and decision-makers disseminate information and learn from each other’s work.
                </p>
            </div>
            <div class="row" id="patubasList"></div>
            <div class="text-center"><a href="journals.php" class="fs-5 fw-bold">View more...</a></div>
        </div>
    </section>

    <section class="d-flex justify-content-center items-center container " id="Scientia">
        <div>
            <div class="mb-5 text-center">
                <h2 class="text-cpu-blue fw-bold display-6">Scientia et Fides</h2>
                <p class="fw-light">
                    Scientia et Fides is the official journal of higher education research
                    publication of Central Philippine University. It is internationally
                    refereed and comes out annually. The aim of this journal is to provide
                    an avenue for discussions on advancements in various areas of studies.
                    The journal upholds the University’s ideals of excellence, scholarship,
                    nd community service. Scientia et Fides is published once a year under the
                    auspices of Central Philippine University, Jaro, Iloilo City, Philippines
                </p>
            </div>
            <div class="row" id="scientia__List"></div>
            <div class="text-center"><a href="journals.php" class="fs-5 fw-bold">View more...</a></div>
        </div>
    </section>

    <section class="d-flex justify-content-center items-center container " id="latestResearches">
        <div>
            <div class="mb-5 text-center">
                <h2 class="text-cpu-blue fw-bold display-6">Latest Researches</h2>
                <p class="fw-light">
                    It is the official journal of Higher Education Publication of Central Philippine University (ISSN
                    2546-1338) is internationally refereed, comes out semi-annually and is being uploaded here in this
                    page.
                </p>
            </div>
            <div class="row" id="scientia__List"></div>
            <div class="text-center"><a href="journals.php" class="fs-5 fw-bold">View more...</a></div>
        </div>
    </section>

    <section class="container" id="videos">
        <h2 class="text-cpu-blue fw-bold mb-5">Videos</h2>
        <div class="row">
            <div class="col">
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/Eeccb4dc28I"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
                </iframe>
            </div>
            <div class="col">
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/I-RrjMK4K98"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
                </iframe>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/cTsGbJShBVw"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
            <div class="col">
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/cTsGbJShBVw"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
        </div>
    </section>
</div>
<a href="#" class="back-to-top"></a>


<script>
    $(function () {

        //Scroll To top
        $(window).scroll(function () {
            // Show button after 300px
            var showAfter = 300;
            if ($(this).scrollTop() > showAfter) {
                $('.back-to-top').fadeIn();
            } else {
                $('.back-to-top').fadeOut();
            }
        });

        //Click event to scroll to top
        $('.back-to-top').click(function () {
            $('html, body').animate({ scrollTop: 0 }, 200);
            return false;
        });

        //carousel
        var carouselHero = $('#carouselHero').owlCarousel({
            loop: true,
            margin: 10,
            autoplay: true,
            autoplayTimeout: 4000,
            autoplayHoverPause: true,
            singleItem: true,
            navigation: true,
            items: 1,
        });

        //fetch latest news
        $.ajax({
            url: 'api/get/latest-news.php',
            dataType: 'json',
            method: 'get',
            success: function (response) {
                response.forEach(({ id, title, date, details }) => {
                    const truncate = jQuery.trim(details).substring(0, 2300).trim(this) + "...";
                    $("#carouselLatestNews").append(`<div class="card mx-auto" style="width: 60%;">
                        <img src="assets/images/news-placeholder.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <div class="mb-3">
                                <h5 class="card-title mb-0">${title}</h5>
                            <small class="text-muted">${new Date(date).toDateString()}</small>
                            <p><i class="bi bi-person"> URC</i></p>
                                </div>
                            <a href="news-details.php?id=${id}" class="card-link">Read More</a>
                        </div>
                    </div>`);
                    $('#lastNews').html(`<div class="mt-3 shadow mb-2 p-4 rounded"><a href="news-details.php?id=${id}"><h5 class="">${title}</h5><small class="text-muted">By CPU-URC | ${new Date(date).toDateString()}</small><a><p>${truncate}</p><div><a class="fw-bold" href="news-details.php?id=${id}">Read more</a></div>`);
                });

                // var ifMultiple = false;
                // $thisGallery = $(this);
                // if($thisGallery.children('.owl-item').length > 1) {
                //     ifMultiple = true;
                // }


                var carouselLatestNews = $('#carouselLatestNews').owlCarousel({
                    loop: true,
                    margin: 10,
                    autoplay: true,
                    autoplayTimeout: 4000,
                    autoplayHoverPause: true,
                    singleItem: true,
                    navigation: true,
                    items: 1,
                });
            }
        });

        //fetch Patubas Journals
        $.ajax({
            url: 'api/get/journals.php',
            dataType: 'json',
            method: 'get',
            success: function (response) {
                response.forEach(({ id, title, type, date, vol, cp }) => {
                    $("#patubasList").append(`<div class="col-4 p-3">
                        <a href="journal-details.php?type=patubas&id=${id}" class="card-link">
                            <img src="journals/coverphoto/${cp}" class="card-img-top shadow-lg p-3 mb-1 bg-body rounded" style="height: 25rem; width: 20rem">
                            <div class="card-body">
                                <div class="mb-3">
                                    <h5 class="card-title mb-0">Vol. ${vol}</h5>                               
                                    <small class="text-muted">${new Date(date).toDateString()}</small>
                                </div>
                            </div>
                        </a>
                    </div>`);
                });
            }
        });

        //fetch scientia et fides journals
        $.ajax({
            url: 'api/get/journals-scientia.php',
            dataType: 'json',
            method: 'get',
            success: function (response) {
                response.forEach(({ id, title, abstract, author, date, cp }) => {
                    const truncate = jQuery.trim(abstract).substring(0, 200).trim(this) + "...";
                    $("#scientia__List").append(
                        `<div class="col-4 p-3">                      
                            <div class="card-body"> 
                                <img src="journals/coverphoto/${cp}" class="card-img-top shadow-lg p-3 mb-1 bg-body rounded mb-1" style="height: 25rem; width: 20rem">
                                <div class="mb-2">
                                    <a href="journal-details.php?type=scientia&id=${id}" class="card-link">
                                    <h6 class="card-title">${title}</h6>
                                    </a>
                                    <small class="card-title fst-italic mb-2">By: ${author}</small></br>
                                    <p class="scientia__Abstract mt-2">${truncate}</p>                                
                                    <a href="journal-details.php?type=scientia&id=${id}" class="card-link">
                                Read More
                                 </a></br>                              
                                <small class="text-muted">${new Date(date).toDateString()}</small>
                                </div>

                            </div>
                    </div>`
                    );
                });
            }
        });

        // fetch newsletters
        $.ajax({
            url: 'api/get/latest-newsletter.php',
            dataType: 'json',
            method: 'get',
            success: function (data) {
                data.forEach(({ id, file, vol, date, cp }) => {
                    $('#newsletter__List').append(`<div class="col-4 p-3">                      
                            <div class="card-body"> 
                                <img src="journals/coverphoto/${cp}" class="card-img-top shadow-lg p-3 mb-1 bg-body rounded" style="height: 25rem; width: 20rem">
                                <div class="mb-2 mt-3">
                                    <a href="journal-details.php?type=scientia&id=${id}" class="card-link">
                                    <h5 class="card-title">CPU Research Newsletter ${new Date(date).toDateString("default", "short").slice(3)}</h5>                                
                                Read More
                                 </a>                            
                                </div>

                            </div>
                    </div>`);
                })
            }
        })
    });
</script>